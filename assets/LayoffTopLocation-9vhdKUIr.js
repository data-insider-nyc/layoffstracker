import{R as f,j as e}from"./index-DwtJoF-s.js";import{R as g,B as x,C as m,X as h,Y as y,T as u,a as p,b,L as j}from"./BarChart-DhoeokT8.js";const S={"San Francisco":"SF Bay Area","Palo Alto":"SF Bay Area","Menlo Park":"SF Bay Area",Sunnyvale:"SF Bay Area","Mountain View":"SF Bay Area","Redwood City":"SF Bay Area","Santa Clara":"SF Bay Area","San Jose":"SF Bay Area",Oakland:"SF Bay Area",Fremont:"SF Bay Area","Los Angeles":"California (Other)","San Diego":"California (Other)",Seattle:"Washington",Bellevue:"Washington",Redmond:"Washington","New York City":"New York","New York":"New York",Atlanta:"Georgia",Austin:"Texas",Dallas:"Texas",Houston:"Texas",Chicago:"Illinois",Denver:"Colorado",Boston:"Massachusetts",Cambridge:"Massachusetts","Washington D.C.":"Washington D.C.",Midland:"Michigan",Detroit:"Michigan",Portland:"Oregon"},O=n=>{if(!n)return"Unknown";const a=n.trim();for(const[r,s]of Object.entries(S))if(a.toLowerCase().includes(r.toLowerCase()))return s;return a},C=(n,a,r)=>{const s=n/a;return r?s>.8?"#dc2626":s>.6?"#f97316":s>.4?"#eab308":s>.2?"#84cc16":"#22c55e":s>.8?"#ef4444":s>.6?"#f97316":s>.4?"#fbbf24":s>.2?"#86efac":"#4ade80"},w=({active:n,payload:a,isDarkMode:r})=>{if(n&&a&&a.length){const s=a[0].payload;return e.jsxs("div",{className:`p-2 rounded border ${r?"bg-gray-800 border-gray-700":"bg-white border-gray-300"}`,children:[e.jsx("p",{className:`font-semibold ${r?"text-white":"text-gray-900"}`,children:s.state}),e.jsxs("p",{className:r?"text-gray-300":"text-gray-700",children:["Layoffs: ",s.laidOff.toLocaleString()]}),e.jsxs("p",{className:r?"text-gray-300":"text-gray-700",children:["Companies: ",s.companies]}),e.jsxs("p",{className:r?"text-gray-300":"text-gray-700",children:["Share: ",s.percentage]})]})}return null},A=({data:n,isDarkMode:a})=>{const r=f.useMemo(()=>{const t={};n.forEach(({company:o,headquarter:i,laidOff:d})=>{const l=O(i);t[l]||(t[l]={laidOff:0,companies:new Set}),t[l].laidOff+=d,t[l].companies.add(o)});const c=Object.values(t).reduce((o,i)=>o+i.laidOff,0);return Object.entries(t).map(([o,i])=>({state:o,laidOff:i.laidOff,companies:i.companies.size,percentage:(i.laidOff/c*100).toFixed(1)+"%"})).sort((o,i)=>i.laidOff-o.laidOff).slice(0,15)},[n]),s=Math.max(...r.map(t=>t.laidOff),1);return r.length===0?e.jsx("div",{children:"Loading chart..."}):e.jsxs("div",{children:[e.jsxs("div",{style:{width:"100%",height:500},children:[e.jsx("h2",{className:`text-center text-xl mb-4 ${a?"text-white":"text-gray-900"}`,children:"Top States by Total Layoffs"}),e.jsx(g,{children:e.jsxs(x,{data:r,layout:"vertical",margin:{top:20,right:80,left:120,bottom:20},children:[e.jsx(m,{strokeDasharray:"3 3"}),e.jsx(h,{type:"number",tick:{fontSize:11},tickFormatter:t=>t.toLocaleString()}),e.jsx(y,{type:"category",tick:{fontSize:12},width:110,dataKey:"state"}),e.jsx(u,{content:e.jsx(w,{isDarkMode:a})}),e.jsxs(p,{dataKey:"laidOff",radius:[0,8,8,0],children:[r.map((t,c)=>e.jsx(b,{fill:C(t.laidOff,s,a)},`cell-${c}`)),e.jsx(j,{dataKey:"laidOff",position:"right",formatter:t=>t.toLocaleString(),style:{fontSize:11,fill:a?"#e5e7eb":"#333"}})]})]})})]}),e.jsxs("div",{className:`mt-6 p-4 rounded-lg ${a?"bg-gray-800":"bg-gray-50"}`,children:[e.jsx("h3",{className:`text-sm font-semibold mb-3 ${a?"text-white":"text-gray-900"}`,children:"Summary by State"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 text-sm",children:r.map(t=>e.jsxs("div",{className:`p-2 rounded ${a?"bg-gray-700":"bg-white border border-gray-200"}`,children:[e.jsx("div",{className:"font-semibold",children:t.state}),e.jsxs("div",{className:a?"text-gray-300":"text-gray-600",children:[t.laidOff.toLocaleString()," people â€¢ ",t.companies," companies"]}),e.jsxs("div",{className:`text-xs font-medium ${a?"text-blue-400":"text-blue-600"}`,children:[t.percentage," of total"]})]},t.state))})]})]})};export{A as default};
